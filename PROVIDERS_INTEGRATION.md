# –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è Multi-Provider System

## –û–≥–ª—è–¥ –∑–º—ñ–Ω

–£—Å–ø—ñ—à–Ω–æ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ —Å–∏—Å—Ç–µ–º—É –±–∞–≥–∞—Ç–æ–ø—Ä–æ–≤–∞–π–¥–µ—Ä–Ω–æ—ó –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –¥–ª—è —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π OpenAI proxy —Å–µ—Ä–≤–µ—Ä–∞. –°–∏—Å—Ç–µ–º–∞ –¥–æ–∑–≤–æ–ª—è—î –ø—ñ–¥–∫–ª—é—á–∞—Ç–∏ –º–æ–¥–µ–ª—ñ –≤—ñ–¥ —Ä—ñ–∑–Ω–∏—Ö LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤ —á–µ—Ä–µ–∑ —î–¥–∏–Ω–∏–π API —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

## –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### ‚úÖ –ü—Ä–æ–≤–∞–π–¥–µ—Ä–∏ (8 —à—Ç—É–∫)

1. **Anthropic (Claude)** - `ext-anthropic-*`
   - Claude 3.5 Sonnet, Haiku, Opus
   - Streaming –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

2. **OpenAI (–ø—Ä—è–º–∏–π –¥–æ—Å—Ç—É–ø)** - `ext-openai-*`
   - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ OpenAI API
   - –ü–æ–≤–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å –∑ OpenAI SDK

3. **Azure OpenAI** - `ext-azure-*`
   - Microsoft Azure OpenAI Service
   - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ deployments

4. **Ollama (–ª–æ–∫–∞–ª—å–Ω—ñ –º–æ–¥–µ–ª—ñ)** - `ext-ollama-*`
   - LLaMA, Mistral, —Ç–∞ —ñ–Ω—à—ñ –ª–æ–∫–∞–ª—å–Ω—ñ –º–æ–¥–µ–ª—ñ
   - –ù–µ –ø–æ—Ç—Ä–µ–±—É—î API –∫–ª—é—á–∞

5. **Google AI (Gemini)** - `ext-google-*`
   - Gemini Pro, Flash –º–æ–¥–µ–ª—ñ
   - Streaming –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

6. **OpenRouter** - `ext-openrouter-*`
   - –î–æ—Å—Ç—É–ø –¥–æ 100+ –º–æ–¥–µ–ª–µ–π
   - –Ñ–¥–∏–Ω–∏–π API –¥–ª—è –±–∞–≥–∞—Ç—å–æ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤

7. **LiteLLM** - `ext-litellm-*`
   - Gateway –¥–æ –≤—Å—ñ—Ö –ø–æ–ø—É–ª—è—Ä–Ω–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤
   - –ì–Ω—É—á–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

8. **xAI (Grok)** - `ext-xai-*`
   - Grok –º–æ–¥–µ–ª—ñ –≤—ñ–¥ xAI
   - Beta –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

### ‚úÖ –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```
providers/
‚îú‚îÄ‚îÄ base.mjs              # –ë–∞–∑–æ–≤–∏–π –∫–ª–∞—Å –∑ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º Provider
‚îú‚îÄ‚îÄ registry.mjs          # –†–µ—î—Å—Ç—Ä —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
‚îú‚îÄ‚îÄ config.mjs            # –ú–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó (.env —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è)
‚îú‚îÄ‚îÄ index.mjs             # –ì–æ–ª–æ–≤–Ω–∏–π –µ–∫—Å–ø–æ—Ä—Ç –º–æ–¥—É–ª—è
‚îú‚îÄ‚îÄ anthropic.mjs         # Anthropic Provider
‚îú‚îÄ‚îÄ openai.mjs            # OpenAI Provider
‚îú‚îÄ‚îÄ azure.mjs             # Azure OpenAI Provider
‚îú‚îÄ‚îÄ ollama.mjs            # Ollama Provider
‚îú‚îÄ‚îÄ google.mjs            # Google AI Provider
‚îú‚îÄ‚îÄ openrouter.mjs        # OpenRouter Provider
‚îú‚îÄ‚îÄ litellm.mjs           # LiteLLM Provider
‚îú‚îÄ‚îÄ xai.mjs               # xAI Provider
‚îî‚îÄ‚îÄ README.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤
```

### ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —Å–µ—Ä–≤–µ—Ä–æ–º

**server.js –∑–º—ñ–Ω–∏:**
- –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ
- –†–æ–∑—à–∏—Ä–µ–Ω–∏–π `/v1/models` endpoint –∑ –º–æ–¥–µ–ª—è–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤
- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è –∑–∞–ø–∏—Ç—ñ–≤ `/v1/chat/completions` –¥–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤
- API endpoints –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏

**–ù–æ–≤—ñ API endpoints:**
- `GET /api/monitoring/providers` - —Å—Ç–∞—Ç—É—Å –≤—Å—ñ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤
- `POST /api/monitoring/providers/:name/config` - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
- `POST /api/monitoring/providers/:name/test` - —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
- `GET /api/monitoring/providers/:name/models` - —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

### ‚úÖ Web UI (monitor.html)

–î–æ–¥–∞–Ω–∞ –Ω–æ–≤–∞ –≤–∫–ª–∞–¥–∫–∞ **"üîå –ü—Ä–æ–≤–∞–π–¥–µ—Ä–∏"** –∑ –º–æ–∂–ª–∏–≤–æ—Å—Ç—è–º–∏:
- –ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç–∞—Ç—É—Å—É –≤—Å—ñ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤
- –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è API –∫–ª—é—á—ñ–≤
- –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
- –ü–µ—Ä–µ–≥–ª—è–¥ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –º–æ–¥–µ–ª–µ–π
- –í—ñ–∑—É–∞–ª—å–Ω–∞ —ñ–Ω–¥–∏–∫–∞—Ü—ñ—è —Å—Ç–∞–Ω—É (üü¢ –∞–∫—Ç–∏–≤–Ω–∏–π, üü° –≤–∏–º–∫–Ω–µ–Ω–æ, üî¥ –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ)

![Providers Tab](https://github.com/user-attachments/assets/a4865b62-4c40-4df5-8273-5b50eac67ccc)

### ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ—Ñ—ñ–∫—Å—ñ–≤ –º–æ–¥–µ–ª–µ–π

–í—Å—ñ –º–æ–¥–µ–ª—ñ –≤—ñ–¥ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤ –º–∞—é—Ç—å —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π –ø—Ä–µ—Ñ—ñ–∫—Å –¥–ª—è –ª–µ–≥–∫–æ—ó —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó:
- `ext-anthropic-claude-3-5-sonnet-20241022`
- `ext-openai-gpt-4`
- `ext-azure-gpt-4`
- `ext-ollama-llama3`
- `ext-google-gemini-pro`
- `ext-openrouter-anthropic/claude-3.5-sonnet`
- `ext-litellm-gpt-4`
- `ext-xai-grok-beta`

### ‚úÖ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —á–µ—Ä–µ–∑ .env

–°—Ç–≤–æ—Ä–µ–Ω–æ `.env.example` –∑ —à–∞–±–ª–æ–Ω–æ–º –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó:

```bash
# Anthropic Provider
ANTHROPIC_ENABLED=0
ANTHROPIC_API_KEY=sk-ant-api03-xxx

# Ollama Provider
OLLAMA_ENABLED=1
OLLAMA_BASE_URL=http://localhost:11434

# ... —Ç–∞ —ñ–Ω—à—ñ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏
```

## –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### Python –∑ OpenAI SDK

```python
from openai import OpenAI

client = OpenAI(
    base_url="http://localhost:4000/v1",
    api_key="dummy"
)

# –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Claude —á–µ—Ä–µ–∑ proxy
response = client.chat.completions.create(
    model="ext-anthropic-claude-3-5-sonnet-20241022",
    messages=[{"role": "user", "content": "Hello!"}]
)
```

### JavaScript

```javascript
const response = await fetch('http://localhost:4000/v1/chat/completions', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    model: 'ext-ollama-llama3',
    messages: [{ role: 'user', content: 'Hello!' }]
  })
});
```

### cURL

```bash
curl -X POST http://localhost:4000/v1/chat/completions \
  -H "Content-Type: application/json" \
  -d '{
    "model": "ext-google-gemini-pro",
    "messages": [{"role": "user", "content": "Hello!"}]
  }'
```

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –ë–∞–∑–æ–≤–∏–π Provider —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–ö–æ–∂–µ–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Ä–µ–∞–ª—ñ–∑—É—î:
- `getModels()` - –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –º–æ–¥–µ–ª–µ–π
- `chatCompletion(params)` - —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ –∑–∞–ø–∏—Ç–∏
- `streamChatCompletion(params)` - streaming –∑–∞–ø–∏—Ç–∏
- `validate()` - –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
- `requiresApiKey()` - —á–∏ –ø–æ—Ç—Ä—ñ–±–µ–Ω API –∫–ª—é—á

### –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è –∑–∞–ø–∏—Ç—ñ–≤

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∞—î –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∑–∞ –ø—Ä–µ—Ñ—ñ–∫—Å–æ–º –º–æ–¥–µ–ª—ñ:
1. –ö–ª—ñ—î–Ω—Ç –Ω–∞–¥—Å–∏–ª–∞—î –∑–∞–ø–∏—Ç –∑ `model: "ext-anthropic-claude-3-5-sonnet"`
2. `ProviderRegistry.findProviderForModel()` –∑–Ω–∞—Ö–æ–¥–∏—Ç—å Anthropic –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
3. –ó–∞–ø–∏—Ç –º–∞—Ä—à—Ä—É—Ç–∏–∑—É—î—Ç—å—Å—è –¥–æ `AnthropicProvider.chatCompletion()`
4. –í—ñ–¥–ø–æ–≤—ñ–¥—å –∫–æ–Ω–≤–µ—Ä—Ç—É—î—Ç—å—Å—è –≤ OpenAI —Ñ–æ—Ä–º–∞—Ç

### Streaming –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

–í—Å—ñ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏ –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å SSE (Server-Sent Events) streaming:
- –ö–ª—ñ—î–Ω—Ç –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î `stream: true`
- –ü—Ä–æ–≤–∞–π–¥–µ—Ä –ø–æ–≤–µ—Ä—Ç–∞—î async generator
- –°–µ—Ä–≤–µ—Ä —Ç—Ä–∞–Ω—Å–ª—é—î chunks —è–∫ SSE –ø–æ–¥—ñ—ó
- –§–æ—Ä–º–∞—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —Å—É–º—ñ—Å–Ω–∏–π –∑ OpenAI streaming

## –ë–µ–∑–ø–µ–∫–∞

‚úÖ API –∫–ª—é—á—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `.env` —Ñ–∞–π–ª—ñ  
‚úÖ `.env` –¥–æ–¥–∞–Ω–æ –¥–æ `.gitignore`  
‚úÖ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —á–µ—Ä–µ–∑ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ `.env`  
‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –ø—Ä–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó  
‚úÖ –ü–æ–º–∏–ª–∫–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤ —ñ–∑–æ–ª—å–æ–≤–∞–Ω—ñ –≤—ñ–¥ –æ—Å–Ω–æ–≤–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏  

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

**–ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ:**
- ‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –∑ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
- ‚úÖ `/v1/models` –ø–æ–≤–µ—Ä—Ç–∞—î –º–æ–¥–µ–ª—ñ –∑ —É—Å—ñ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤
- ‚úÖ API endpoints –ø—Ä–∞—Ü—é—é—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ Web UI –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –≤—Å—ñ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏
- ‚úÖ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —á–µ—Ä–µ–∑ UI —Ñ—É–Ω–∫—Ü—ñ–æ–Ω—É—î
- ‚úÖ –ü—Ä–µ—Ñ—ñ–∫—Å–∏ –º–æ–¥–µ–ª–µ–π –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–ü–æ—Ç—Ä–µ–±—É—î —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ —Ä–µ–∞–ª—å–Ω–∏–º–∏ API –∫–ª—é—á–∞–º–∏:**
- Anthropic API
- Google AI API
- OpenRouter API
- xAI API

## –§–∞–π–ª–∏ –∑–º—ñ–Ω–µ–Ω—ñ/–¥–æ–¥–∞–Ω—ñ

**–ù–æ–≤—ñ —Ñ–∞–π–ª–∏ (13):**
- `providers/base.mjs`
- `providers/registry.mjs`
- `providers/config.mjs`
- `providers/index.mjs`
- `providers/anthropic.mjs`
- `providers/openai.mjs`
- `providers/azure.mjs`
- `providers/ollama.mjs`
- `providers/google.mjs`
- `providers/openrouter.mjs`
- `providers/litellm.mjs`
- `providers/xai.mjs`
- `providers/README.md`
- `.env.example`

**–ó–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏ (3):**
- `server.js` - –¥–æ–¥–∞–Ω–æ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤
- `public/monitor.html` - –¥–æ–¥–∞–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤
- `.env` - –ª–æ–∫–∞–ª—å–Ω–∏–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

## –ú–∞–π–±—É—Ç–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

- [ ] –î–æ–¥–∞—Ç–∏ –±—ñ–ª—å—à–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤ (Databricks, AWS Bedrock, GCP Vertex AI)
- [ ] –ö–µ—à—É–≤–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É –º–æ–¥–µ–ª–µ–π
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º
- [ ] Rate limiting per provider
- [ ] Fallback –º–µ—Ö–∞–Ω—ñ–∑–º –º—ñ–∂ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
- [ ] UI –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ—ó –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó (custom endpoints, timeouts)
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ
- [ ] Health checks –¥–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

–ü–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ `providers/README.md`

## –ê–≤—Ç–æ—Ä–∏

–†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –¥–ª—è –ø—Ä–æ–µ–∫—Ç—É olegkizyma2/codespaces-models
