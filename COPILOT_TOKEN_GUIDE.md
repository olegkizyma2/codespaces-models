# üîë GitHub Copilot Token Guide

## –Ø–∫ –ø—Ä–∞—Ü—é—î –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è

### 1. –ü–µ—Ä—à–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
```bash
# –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä
./restart_server.sh

# –ó—Ä–æ–±—ñ—Ç—å –∑–∞–ø–∏—Ç –¥–æ Copilot –º–æ–¥–µ–ª—ñ (—è–∫—â–æ —Ç–æ–∫–µ–Ω–∞ –Ω–µ–º–∞—î)
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è OAuth Device Flow:
# ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
# ‚ïë           üîê GITHUB COPILOT AUTHENTICATION                   ‚ïë
# ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
# 
# Please visit: https://github.com/login/device
# Enter code: XXXX-XXXX
```

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ https://github.com/login/device
2. –í–≤–µ–¥—ñ—Ç—å –∫–æ–¥ –∑ –∫–æ–Ω—Å–æ–ª—ñ
3. –ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å –¥–æ—Å—Ç—É–ø
4. ‚úÖ –¢–æ–∫–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–µ—Ä–µ–∂–µ—Ç—å—Å—è –≤ `.env`

---

## –î–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —Ç–æ–∫–µ–Ω–∏

### OAuth —Ç–æ–∫–µ–Ω (–¥–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–∏–π, ~1-2 —Ä–æ–∫–∏)
- **–§–∞–π–ª:** `.env`
- **–ó–º—ñ–Ω–Ω–∞:** `GITHUB_COPILOT_TOKEN=ghu_...`
- **Git:** ‚ùå –ù–ï –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó (–≤ `.gitignore`)
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:** –î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è Copilot API —Ç–æ–∫–µ–Ω–∞

### Copilot API —Ç–æ–∫–µ–Ω (–∫–æ—Ä–æ—Ç–∫–æ—Å—Ç—Ä–æ–∫–æ–≤–∏–π, 25 —Ö–≤–∏–ª–∏–Ω)
- **–§–∞–π–ª:** `.cache/githubcopilot-token.json`
- **–§–æ—Ä–º–∞—Ç:** `tid=...;exp=...;sku=...`
- **Git:** ‚ùå –ù–ï –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó (–≤ `.gitignore`)
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:** –î–ª—è –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ Copilot API
- **–û–Ω–æ–≤–ª–µ–Ω–Ω—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–∂–Ω—ñ 25 —Ö–≤–∏–ª–∏–Ω

---

## –ö–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è

### ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –ù–ï –ø–æ—Ç—Ä—ñ–±–Ω–∞:
- üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ VS Code
- üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ (`./restart_server.sh`)
- üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º–∏ (reboot)
- üóëÔ∏è –í–∏–¥–∞–ª–µ–Ω–Ω—è `.cache/` (—Ç–æ–∫–µ–Ω –æ–Ω–æ–≤–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)
- üì¶ Git pull/push (—Ç–æ–∫–µ–Ω–∏ –Ω–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó)

### ‚ùå –ü–æ—Ç—Ä—ñ–±–Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è:
- üóëÔ∏è –í–∏–¥–∞–ª–µ–Ω–æ `.env` —Ñ–∞–π–ª
- üíª –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è –Ω–∞ –Ω–æ–≤–∏–π –∫–æ–º–ø'—é—Ç–µ—Ä
- ‚è±Ô∏è OAuth —Ç–æ–∫–µ–Ω –∑–∞—Å—Ç–∞—Ä—ñ–≤ (—á–µ—Ä–µ–∑ 1-2 —Ä–æ–∫–∏)
- üö´ –¢–æ–∫–µ–Ω –≤—ñ–¥–∫–ª–∏–∫–∞–Ω–æ –Ω–∞ GitHub

---

## –®–≤–∏–¥–∫—ñ –∫–æ–º–∞–Ω–¥–∏

### –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–æ–∫–µ–Ω–∏
```bash
# OAuth —Ç–æ–∫–µ–Ω
grep GITHUB_COPILOT_TOKEN .env | sed 's/=.*/=***EXISTS***/'

# Cache
ls -lh .cache/githubcopilot-token.json

# –¢–µ—Ä–º—ñ–Ω –¥—ñ—ó cache
cat .cache/githubcopilot-token.json | grep expires_at
```

### –ü—Ä–∏–º—É—Å–æ–≤–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
```bash
# –í–∏–¥–∞–ª–∏—Ç–∏ —Ç—ñ–ª—å–∫–∏ cache (OAuth —Ç–æ–∫–µ–Ω –∑–∞–ª–∏—à–∏—Ç—å—Å—è)
rm -f .cache/githubcopilot-token.json

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω
./restart_server.sh
```

### –ü–æ–≤–Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
```bash
# –í–∏–¥–∞–ª–∏—Ç–∏ –≤—Å—ñ —Ç–æ–∫–µ–Ω–∏
rm -f .cache/githubcopilot-token.json
sed -i '' 's/GITHUB_COPILOT_TOKEN=.*/GITHUB_COPILOT_TOKEN=your_copilot_token_here/' .env

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ - –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è OAuth flow
./restart_server.sh
```

---

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –ø—Ä–∞—Ü—é—î Copilot
curl -X POST http://localhost:4000/v1/chat/completions \
  -H "Content-Type: application/json" \
  -d '{
    "model": "copilot-gpt-4o",
    "messages": [{"role": "user", "content": "Hi"}],
    "max_tokens": 20,
    "stream": false
  }'
```

---

## Troubleshooting

### 403 Forbidden
- ‚è±Ô∏è Copilot API —Ç–æ–∫–µ–Ω –∑–∞—Å—Ç–∞—Ä—ñ–≤
- üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä: `./restart_server.sh`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–∏—Ç—å—Å—è

### OAuth flow –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è
- ‚ùå OAuth —Ç–æ–∫–µ–Ω —î, –∞–ª–µ –Ω–µ–¥—ñ–π—Å–Ω–∏–π
- üóëÔ∏è –í–∏–¥–∞–ª—ñ—Ç—å —Ç–æ–∫–µ–Ω: `rm .cache/*.json`
- üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å: `./restart_server.sh`

### –ú–æ–¥–µ–ª—ñ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è
- ‚è±Ô∏è Timeout –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ (2 —Å–µ–∫—É–Ω–¥–∏)
- üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å: `./restart_server.sh`
- ‚úÖ Copilot –º–æ–¥–µ–ª—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂–∞—Ç—å—Å—è –ø—ñ—Å–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

---

## –ë–µ–∑–ø–µ–∫–∞

- üîí `.env` —Ñ–∞–π–ª **–ù–ï –∫–æ–º—ñ—Ç–∏—Ç–∏** –≤ Git
- üîí `.cache/` –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è **–ù–ï –∫–æ–º—ñ—Ç–∏—Ç–∏** –≤ Git
- ‚úÖ OAuth —Ç–æ–∫–µ–Ω –¥–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–∏–π, –∞–ª–µ –≤ `.gitignore`
- ‚úÖ Copilot API —Ç–æ–∫–µ–Ω –∫–æ—Ä–æ—Ç–∫–æ—Å—Ç—Ä–æ–∫–æ–≤–∏–π (25 —Ö–≤), –∞–≤—Ç–æ–æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è
- ‚úÖ –ü—Ä–∏ –≤—Ç—Ä–∞—Ç—ñ `.env` –ø—Ä–æ—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
codespaces-models/
‚îú‚îÄ‚îÄ .env                              # OAuth —Ç–æ–∫–µ–Ω (–ù–ï –≤ Git)
‚îÇ   ‚îî‚îÄ‚îÄ GITHUB_COPILOT_TOKEN=ghu_...
‚îú‚îÄ‚îÄ .cache/                           # –ù–ï –≤ Git
‚îÇ   ‚îî‚îÄ‚îÄ githubcopilot-token.json     # Copilot API —Ç–æ–∫–µ–Ω (25 —Ö–≤)
‚îú‚îÄ‚îÄ .gitignore                        # –ó–∞—Ö–∏—Å—Ç —Ç–æ–∫–µ–Ω—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ .env                          # ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ .cache/                       # ‚úÖ
‚îî‚îÄ‚îÄ providers/
    ‚îî‚îÄ‚îÄ githubcopilot.mjs             # OAuth + Token refresh
```

---

## Workflow

```mermaid
graph LR
    A[–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞] --> B{OAuth —Ç–æ–∫–µ–Ω –≤ .env?}
    B -->|–ù—ñ| C[OAuth Device Flow]
    C --> D[–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ .env]
    B -->|–¢–∞–∫| E{Cache —Ç–æ–∫–µ–Ω –¥—ñ–π—Å–Ω–∏–π?}
    E -->|–ù—ñ| F[–û—Ç—Ä–∏–º–∞—Ç–∏ –Ω–æ–≤–∏–π –∑ API]
    F --> G[–ó–±–µ—Ä–µ–≥—Ç–∏ –≤ .cache/]
    E -->|–¢–∞–∫| H[–í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ cache]
    G --> H
    D --> F
    H --> I[Copilot –ø—Ä–∞—Ü—é—î ‚úÖ]
```

---

**üí° –ü–æ—Ä–∞–¥–∞:** –ü—ñ—Å–ª—è –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ –Ω–∞ –Ω–æ–≤–∏–π –∫–æ–º–ø'—é—Ç–µ—Ä, –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä —ñ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—è –æ–¥–∏–Ω —Ä–∞–∑. –¢–æ–∫–µ–Ω –∑–±–µ—Ä–µ–∂–µ—Ç—å—Å—è —ñ –±—ñ–ª—å—à–µ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–¥–µ –∞–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏—Å—è (–ø–æ–∫–∏ –Ω–µ –≤–∏–¥–∞–ª–∏—Ç–µ `.env`).
