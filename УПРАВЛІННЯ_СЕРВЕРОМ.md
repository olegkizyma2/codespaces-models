# üöÄ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è OpenAI Proxy Server

## –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –ó –±—É–¥—å-—è–∫–æ—ó –ø–∞–ø–∫–∏ (–ø—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è):
```bash
manage-server restart  # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏
manage-server status   # –°—Ç–∞—Ç—É—Å
manage-server logs     # –õ–æ–≥–∏
manage-server tokens   # –°—Ç–∞—Ç—É—Å —Ç–æ–∫–µ–Ω—ñ–≤
```

### –ó –ø–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç—É:
```bash
./manage-server.sh restart
./manage-server.sh status
```

## üìã –í—Å—ñ –∫–æ–º–∞–Ω–¥–∏

### –û—Å–Ω–æ–≤–Ω—ñ
| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å | –ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ |
|---------|------|---------------------|
| `restart` | –®–≤–∏–¥–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ | –ü—ñ—Å–ª—è –∑–º—ñ–Ω –≤ –∫–æ–¥—ñ |
| `reload` | –ü–æ–≤–Ω–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∑ .env | –ü—ñ—Å–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤ |
| `start` | –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä | –ü–µ—Ä—à–∏–π –∑–∞–ø—É—Å–∫ |
| `stop` | –ó—É–ø–∏–Ω–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä | –ü–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–º–∫–Ω—É—Ç–∏ |
| `status`, `s` | –ü–æ–∫–∞–∑–∞—Ç–∏ —Å—Ç–∞—Ç—É—Å | –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º–∏ |

### –õ–æ–≥–∏ —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å |
|---------|------|
| `logs`, `l` | –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ (Ctrl+C –≤–∏—Ö—ñ–¥) |
| `errors`, `e` | –¢—ñ–ª—å–∫–∏ –ø–æ–º–∏–ª–∫–∏ –∑–∞ –æ—Å—Ç–∞–Ω–Ω—ñ 30 —Ä—è–¥–∫—ñ–≤ |
| `flush` | –û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—ñ –ª–æ–≥–∏ |
| `monit`, `m` | PM2 —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ |

### –¢–æ–∫–µ–Ω–∏
| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å |
|---------|------|
| `tokens`, `t` | –î–µ—Ç–∞–ª—å–Ω–∏–π —Å—Ç–∞—Ç—É—Å –≤—Å—ñ—Ö —Ç–æ–∫–µ–Ω—ñ–≤ |

### –¢–µ—Å—Ç–∏
| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å |
|---------|------|
| `test` | –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –ø–æ–≤–Ω—ñ —Ç–µ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º–∏ |
| `info`, `i` | –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Å–∏—Å—Ç–µ–º—É |

## üéØ –ù–∞–π—á–∞—Å—Ç—ñ—à—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó

### 1Ô∏è‚É£ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—ñ—Å–ª—è –∑–º—ñ–Ω –≤ –∫–æ–¥—ñ
```bash
./manage-server.sh restart
```

### 2Ô∏è‚É£ –î–æ–¥–∞–ª–∏ –Ω–æ–≤–∏–π —Ç–æ–∫–µ–Ω –≤ .env
```bash
# 1. –í—ñ–¥—Ä–µ–¥–∞–≥—É–≤–∞–ª–∏ .env (–¥–æ–¥–∞–ª–∏ GITHUB_TOKEN5)
# 2. –†–æ–±–∏–º–æ reload
./manage-server.sh reload

# 3. –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Ç–æ–∫–µ–Ω–∏
./manage-server.sh tokens
```

### 3Ô∏è‚É£ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É
```bash
./manage-server.sh status
```
–ü–æ–∫–∞–∂–µ:
- PM2 —Å—Ç–∞—Ç—É—Å (–æ–Ω–ª–∞–π–Ω/–æ—Ñ–ª–∞–π–Ω)
- –í—Å—ñ —Ç–æ–∫–µ–Ω–∏ —Ç–∞ —ó—Ö —Å—Ç–∞—Ç—É—Å
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤

### 4Ô∏è‚É£ –î–∏–≤–∏–º–æ—Å—å —â–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è
```bash
./manage-server.sh logs
# Ctrl+C –¥–ª—è –≤–∏—Ö–æ–¥—É
```

### 5Ô∏è‚É£ –ë—É–ª–∏ –ø–æ–º–∏–ª–∫–∏? –ü–æ–¥–∏–≤–∏–º–æ—Å—å
```bash
./manage-server.sh errors
```

### 6Ô∏è‚É£ –ó–∞–Ω–∞–¥—Ç–æ –±–∞–≥–∞—Ç–æ –ª–æ–≥—ñ–≤
```bash
./manage-server.sh flush
```

### 7Ô∏è‚É£ –¢–µ—Å—Ç—É—î–º–æ —Å–∏—Å—Ç–µ–º—É
```bash
./manage-server.sh test
```
–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç—å:
- API –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å
- Token Rotator
- –¢–µ—Å—Ç–æ–≤–∏–π –∑–∞–ø–∏—Ç –¥–æ –º–æ–¥–µ–ª—ñ

## üåê Web —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏

### –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ (Simple Chat)
```
http://localhost:4000
```

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
```
http://localhost:4000/monitor
```

### Classic UI
```
http://localhost:4000/classic
```

### Health Check
```
http://localhost:4000/health
```

### –°—Ç–∞—Ç—É—Å —Ç–æ–∫–µ–Ω—ñ–≤ (API)
```bash
curl http://localhost:4000/v1/tokens/stats | jq
```

### –†—É—á–Ω–∞ —Ä–æ—Ç–∞—Ü—ñ—è —Ç–æ–∫–µ–Ω–∞
```bash
curl -X POST http://localhost:4000/v1/tokens/rotate
```

### –°–∫–∏–Ω—É—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
```bash
curl -X POST http://localhost:4000/v1/tokens/reset-stats
```

## üìä –†–æ–∑—É–º—ñ–Ω–Ω—è –≤–∏–≤–æ–¥—É

### Status
```
PM2 Process:
‚îÇ 0  ‚îÇ openai-proxy ‚îÇ online ‚îÇ 4 restarts ‚îÇ 125mb ‚îÇ

üîë –¢–æ–∫–µ–Ω–∏:
–ê–∫—Ç–∏–≤–Ω–∏–π: GITHUB_TOKEN
–í—Å—å–æ–≥–æ: 4

  üü¢ GITHUB_TOKEN: –ø–æ–º–∏–ª–æ–∫=0, –±–ª–æ–∫=false
  ‚ö™ GITHUB_TOKEN2: –ø–æ–º–∏–ª–æ–∫=0, –±–ª–æ–∫=false
  ‚ö™ GITHUB_TOKEN3: –ø–æ–º–∏–ª–æ–∫=0, –±–ª–æ–∫=false
  ‚ö™ GITHUB_TOKEN4: –ø–æ–º–∏–ª–æ–∫=0, –±–ª–æ–∫=false
```

- üü¢ = –ê–∫—Ç–∏–≤–Ω–∏–π —Ç–æ–∫–µ–Ω –∑–∞—Ä–∞–∑
- ‚ö™ = –î–æ—Å—Ç—É–ø–Ω–∏–π —Ç–æ–∫–µ–Ω
- `–ø–æ–º–∏–ª–æ–∫=0` = –ö—ñ–ª—å–∫—ñ—Å—Ç—å 429 –ø–æ–º–∏–ª–æ–∫
- `–±–ª–æ–∫=false` = –¢–æ–∫–µ–Ω –Ω–µ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π

### –ö–æ–ª–∏ —Ç–æ–∫–µ–Ω –±–ª–æ–∫—É—î—Ç—å—Å—è
```
  üü¢ GITHUB_TOKEN: –ø–æ–º–∏–ª–æ–∫=3, –±–ª–æ–∫=true
  ‚ö™ GITHUB_TOKEN2: –ø–æ–º–∏–ª–æ–∫=0, –±–ª–æ–∫=false ‚Üê —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è —Å—é–¥–∏
```

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É

### –©–æ–± –∑–∞–ø—É—Å–∫–∞—Ç–∏ –∑ –±—É–¥—å-—è–∫–æ—ó –ø–∞–ø–∫–∏:

```bash
# –î–æ–¥–∞–π—Ç–µ –≤ ~/.zshrc (–∞–±–æ ~/.bashrc –¥–ª—è bash)
alias manage-server="/Users/dev/Documents/NIMDA/codespaces-models/manage-server.sh"

# –ê–±–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å symlink
sudo ln -s /Users/dev/Documents/NIMDA/codespaces-models/manage-server.sh /usr/local/bin/manage-server
```

–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –º–æ–∂–Ω–∞ –ø—Ä–æ—Å—Ç–æ:
```bash
cd ~/Downloads
manage-server status  # –ø—Ä–∞—Ü—é—î –∑ –±—É–¥—å-—è–∫–æ—ó –ø–∞–ø–∫–∏!
```

## üö® –ï–∫—Å—Ç—Ä–µ–Ω—ñ —Å–∏—Ç—É–∞—Ü—ñ—ó

### –°–µ—Ä–≤–µ—Ä –Ω–µ —Å—Ç–∞—Ä—Ç—É—î
```bash
# 1. –ü–æ–¥–∏–≤–∏—Ç–∏—Å—å –ø–æ–º–∏–ª–∫–∏
./manage-server.sh errors

# 2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ PM2
pm2 list

# 3. –ü–æ–≤–Ω–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
./manage-server.sh stop
./manage-server.sh start
```

### –í—Å—ñ —Ç–æ–∫–µ–Ω–∏ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω—ñ
```bash
# –°–∫–∏–Ω—É—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
curl -X POST http://localhost:4000/v1/tokens/reset-stats

# –ê–±–æ —á–µ—Ä–µ–∑ emergency —Å–∫—Ä–∏–ø—Ç
./token-emergency.sh reset
```

### –õ–æ–≥–∏ –∑–∞–Ω–∞–¥—Ç–æ –≤–µ–ª–∏–∫—ñ
```bash
./manage-server.sh flush
```

### –ü–æ—Ç—Ä—ñ–±–µ–Ω —á–∏—Å—Ç–∏–π —Å—Ç–∞—Ä—Ç
```bash
./manage-server.sh stop
./manage-server.sh flush
./manage-server.sh start
```

## üìù –õ–æ–≥–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥—ñ–≤
```
logs/
  openai-proxy-out.log  # –ó–≤–∏—á–∞–π–Ω—ñ –ª–æ–≥–∏
  openai-proxy-error.log # –ü–æ–º–∏–ª–∫–∏
```

### –î–∏–≤–∏—Ç–∏—Å—å –ª–æ–≥–∏ –Ω–∞–ø—Ä—è–º—É
```bash
# –û—Å—Ç–∞–Ω–Ω—ñ 50 —Ä—è–¥–∫—ñ–≤
tail -f logs/openai-proxy-out.log

# –¢—ñ–ª—å–∫–∏ –ø–æ–º–∏–ª–∫–∏
tail -f logs/openai-proxy-error.log

# –§—ñ–ª—å—Ç—Ä –ø–æ —Ç–æ–∫–µ–Ω–∞–º
grep "TOKEN-ROTATOR" logs/openai-proxy-out.log
```

## üí° –ü–æ—Ä–∞–¥–∏

### –ü—ñ—Å–ª—è –∫–æ–∂–Ω–æ–≥–æ –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞
```bash
./manage-server.sh reload  # –Ω–µ restart!
```

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤ –æ–∫—Ä–µ–º–æ–º—É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ
```bash
./manage-server.sh logs
```

### –ü–µ—Ä—ñ–æ–¥–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
```bash
watch -n 60 './manage-server.sh status'
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Ç–µ—Å—Ç –∫–æ–∂–Ω—ñ 5 —Ö–≤–∏–ª–∏–Ω
```bash
while true; do 
  ./manage-server.sh test
  sleep 300
done
```

## üéì –ù–∞–≤—á–∞–ª—å–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó

### –ü–æ–≤–Ω–∏–π —Ü–∏–∫–ª —Ä–æ–±–æ—Ç–∏
```bash
# 1. –ó–∞–ø—É—Å–∫
./manage-server.sh start

# 2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
./manage-server.sh status

# 3. –¢–µ—Å—Ç
./manage-server.sh test

# 4. –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–æ–∫–µ–Ω—ñ–≤
watch -n 5 'curl -s http://localhost:4000/v1/tokens/stats | jq'

# 5. –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
./manage-server.sh errors

# 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
./manage-server.sh restart
```

## üìö –î–æ–¥–∞—Ç–∫–æ–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

- `TOKEN_ROTATION.md` - –î–µ—Ç–∞–ª—å–Ω–æ –ø—Ä–æ —Ä–æ—Ç–∞—Ü—ñ—é —Ç–æ–∫–µ–Ω—ñ–≤
- `THROTTLING_GUIDE.md` - –ü—Ä–æ throttling —Å–∏—Å—Ç–µ–º—É
- `TOKEN_ROTATION_QUICKSTART.md` - –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç
- `SYSTEM_STATUS.md` - –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º–∏

## üîó –ö–æ—Ä–∏—Å–Ω—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è

| –©–æ | URL |
|----|-----|
| –ì–æ–ª–æ–≤–Ω–∞ | http://localhost:4000 |
| –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ | http://localhost:4000/monitor |
| Classic UI | http://localhost:4000/classic |
| API Stats | http://localhost:4000/v1/tokens/stats |
| Health | http://localhost:4000/health |
| Chat UI | http://localhost:4000/chat |

---

**–°—Ç–≤–æ—Ä–µ–Ω–æ**: 2025-10-10  
**–ü—Ä–æ–µ–∫—Ç**: OpenAI Proxy Server –∑ Token Rotation  
**–í–µ—Ä—Å—ñ—è**: 1.0
